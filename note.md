2019.10.10 黄文诚

# C-Minus+x编译器项目设计方案

本学期修读编译原理课程,  根据课程各章节内容做出编译器的相应部分, 最终拼接在一起就可以得到完整的C-Minus+x语言编译器. 

C-Minus的完整语法由附录A说明.  x部分的特性和功能待定. 语言源程序文件后缀名设置为`.cmnsx` 

本项目拟使用C++语言进行开发, 使用C++11的特性. 项目将会同步在github平台上, 地址为:
https://github.com/Winson-Huang/CminusxCompiler


## 模块分析:

本项目的各个模块之间并不是完全独立的, 各模块有共享的变量也有私有的变量, 有开放接口的函数也有用static修饰的函数. 具体来说, (待补充

整个工程除了主程序main.cpp以外, 还有各模块对应的头文件和源文件, 以及一个`global.h`头文件, 该头文件中除了一些整个工程需要共享的数据结构以外, 还有一些用extern声明的外部变量, 这些外部变量可能在任何一个模块中定义, 而由于在`global.h`外部声明, 因此任意一个文件只要包含了`global.h`, 就可以使用这些变量. 

各模块对应的头文件中仅仅记录了该模块提供给其他模块的接口函数, 而源文件中则是该模块运行过程中的内部变量和内部函数.

第一个部分是设计扫描器(scanner). 

提供`GetNextToken();`等接口, 记号存储在`Token nexttoken;`中.



第二个部分是设计语法分析器(parser).

(未完待续)

实际上语法分析与语义分析关系非常紧密, 那么如何划分他们之间的界限? 个人认为在语法分析阶段, 语法树结点的属性仅仅用于记录, 而不加任何额外操作, 所有对属性的计算都留到语义分析. 但这造成的一个问题就是在语法分析阶段确定的语法树结点结构可能不完整. 需要在语义分析阶段进行补充. 



## 总结

实际上可以利用C++语言的类特性, 将每一个模块都设计为一个类, 头文件中规定好函数与变量的公开程度, 源文件中对各函数进行实现. 然后在`global.h`中extern声明各模块的实例. 这样可以较好实现信息的共享, 并且更加灵活.  可以将一个模块的所有函数声明集中在一起, 也避免了使用static限制函数的使用范围. 